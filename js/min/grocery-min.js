!function(){var t=angular.module("groceryList",["ngAnimate"]);if(localStorage&&localStorage.getItem("items"))var e=JSON.parse(localStorage.getItem("items"));else var e=[];if(localStorage&&localStorage.getItem("meals"))var i=JSON.parse(localStorage.getItem("meals"));else var i=[];var n={};n.notOnList=[],n.onList=[],t.controller("GroceryForm",function(){this.item={},this.tab=1,this.item.type="single",this.setTab=function(t){this.tab=t,1===this.tab?this.item.type="single":(this.item.type="meal",this.item.ingredients=[])},this.isSelected=function(t){return this.tab===t},this.meals=i,this.addItem=function(){if(n.notOnList.length=0,n.onList.length=0,this.checkList(this.item),n.notOnList.forEach(function(t){e.push(t)}),localStorage.setItem("items",JSON.stringify(e)),"single"===this.item.type)this.item={type:"single"};else{if("meal"!==this.item.type)throw new Error("item.type is "+this.item.type);i.push(this.item),localStorage.setItem("meals",JSON.stringify(i)),this.item={type:"meal",ingredients:[]}}},this.addMealToList=function(t){var i=e.map(function(t){return t.name});t.ingredients.forEach(function(t){-1===i.indexOf(t.name)&&e.push(t)})},this.checkList=function(t){var i=e.map(function(t){return t.name});"meal"===this.item.type?t.ingredients.forEach(function(t){-1===i.indexOf(t.name)?n.notOnList.push(t):n.onList.push(t)}):-1===i.indexOf(t.name)?n.notOnList.push(t):n.onList.push(t)},this.isDisabled=function(){return this.item.ingredients&&0===this.item.ingredients.length},this.ingredient={},this.addIngr=function(){this.item.ingredients.push(this.ingredient),this.ingredient={}},this.removeIngr=function(t){var e=this.item.ingredients.indexOf(t);this.item.ingredients.splice(e,1)}}),t.directive("duplicates",function(){return{restrict:"E",templateUrl:"templates/duplicates.html",controller:function(){this.onList=n.onList},controllerAs:"dup"}}),t.directive("singleItem",function(){return{restrict:"E",templateUrl:"templates/single-item.html"}}),t.directive("meals",function(){return{restrict:"E",templateUrl:"templates/meals.html"}}),t.directive("populatedList",function(){return{restrict:"E",templateUrl:"templates/populated-list.html",controller:function(){this.products=e,this.removeProduct=function(t){var i=e.indexOf(t);e.splice(i,1),localStorage.setItem("items",JSON.stringify(e))}},controllerAs:"list"}})}();